var stealth=(function(){"use strict";function Ye(c){return c}const fe={matches:["<all_urls>"],runAt:"document_start",world:"MAIN",registration:"manifest",main(){let c=!0;window.addEventListener("grapes-set-protection-mode",e=>{const t=e;try{const{enabled:n}=JSON.parse(t.detail);c=n,console.log(`[GRAPES Stealth] Protection mode set to: ${n?"enabled":"disabled"}`)}catch(n){console.error("[GRAPES Stealth] Error parsing protection mode event:",n)}});const A=["grapes-custom-styles","grapes-","data-grapes"],y=window.MutationObserver,he=y.prototype.observe,ye=y.prototype.disconnect,be=y.prototype.takeRecords;let R=!1,_=!1;const Ee={hotjar:{globals:["hj","hjSiteSettings","_hjSettings"],scripts:["static.hotjar.com","script.hotjar.com"],cookies:["_hj"]},fullstory:{globals:["FS","_fs_host","_fs_script","_fs_org"],scripts:["fullstory.com/s/fs.js","edge.fullstory.com"],cookies:["fs_uid"]},logrocket:{globals:["LogRocket","_lr_loaded"],scripts:["cdn.logrocket.io","cdn.lr-ingest.io"],cookies:["_lr_"]},mouseflow:{globals:["mouseflow","_mfq"],scripts:["cdn.mouseflow.com","mouseflow.com/projects"],cookies:["mf_"]},clarity:{globals:["clarity"],scripts:["clarity.ms/tag"],cookies:["_clck","_clsk"]},heap:{globals:["heap"],scripts:["cdn.heapanalytics.com","heapanalytics.com"],cookies:["_hp2_"]},smartlook:{globals:["smartlook"],scripts:["rec.smartlook.com","assets.smartlook.com"],cookies:["SL_"]},inspectlet:{globals:["__insp"],scripts:["cdn.inspectlet.com"],cookies:["__insp"]},lucky_orange:{globals:["__lo_site_id","LOQ"],scripts:["d10lpsik1i8c69.cloudfront.net","luckyorange.com"],cookies:["_lo"]},crazyegg:{globals:["CE2"],scripts:["script.crazyegg.com","dnn506yrbagrg.cloudfront.net"],cookies:["_ceir"]}};function M(){const e=[];for(const[t,n]of Object.entries(Ee)){for(const i of n.globals)if(window[i]!==void 0){e.push(t);break}if(e.includes(t))continue;const o=document.querySelectorAll("script[src]");for(const i of Array.from(o)){const r=i.getAttribute("src")||"";if(n.scripts.some(s=>r.includes(s))){e.push(t);break}}}return e}function G(e){_||e.length===0||(_=!0,window.dispatchEvent(new CustomEvent("grapes-session-replay-detected",{detail:JSON.stringify({tools:e,url:window.location.hostname})})))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{const e=M();e.length>0&&G(e)},2e3)}):setTimeout(()=>{const e=M();e.length>0&&G(e)},2e3);function we(e,t){if(!t)return!1;const n=e===document||e===document.documentElement||e===document.head||e===document.body,o=t.childList===!0||t.subtree===!0||t.attributes===!0&&!t.attributeFilter;return n&&o}function ke(e,t){if(R)return;R=!0;const n={targetType:e===document?"document":e===document.documentElement?"documentElement":e===document.head?"head":e===document.body?"body":"other",options:t?{childList:t.childList,subtree:t.subtree,attributes:t.attributes}:null,url:window.location.hostname};window.dispatchEvent(new CustomEvent("grapes-suspicious-observation",{detail:JSON.stringify(n)}))}function l(e){if(!e)return!1;if(e.nodeType===Node.ELEMENT_NODE){const t=e;if(t.id&&A.some(n=>t.id.includes(n))||t.className&&typeof t.className=="string"&&A.some(n=>t.className.includes(n)))return!0;for(const n of Array.from(t.attributes||[]))if(n.name.startsWith("data-grapes"))return!0}return e.parentNode?l(e.parentNode):!1}function Oe(e){if(l(e.target))return!0;for(const t of Array.from(e.addedNodes))if(l(t))return!0;for(const t of Array.from(e.removedNodes))if(l(t))return!0;return!!(e.type==="attributes"&&e.attributeName?.startsWith("data-grapes"))}function j(e){return c?e.filter(t=>!Oe(t)):e}class x{constructor(t){this.isObserving=!1,this.userCallback=t,this.realObserver=new y((n,o)=>{const i=j(n);i.length>0&&this.userCallback(i,o)})}observe(t,n){we(t,n)&&ke(t,n),this.isObserving=!0,he.call(this.realObserver,t,n)}disconnect(){this.isObserving=!1,ye.call(this.realObserver)}takeRecords(){const t=be.call(this.realObserver);return j(t)}}Object.defineProperty(window,"MutationObserver",{value:x,writable:!1,configurable:!1}),"WebKitMutationObserver"in window&&Object.defineProperty(window,"WebKitMutationObserver",{value:x,writable:!1,configurable:!1});const ve=Document.prototype.querySelectorAll,Ae=Document.prototype.querySelector,Ce=Document.prototype.getElementById,Se=Document.prototype.getElementsByClassName,Ne=Document.prototype.getElementsByTagName,C=Element.prototype.querySelectorAll,Te=Element.prototype.querySelector,De=Element.prototype.getElementsByClassName,Le=Element.prototype.getElementsByTagName;function p(e){return c?Array.from(e).filter(t=>!l(t)):Array.from(e)}function S(e){return c?l(e):!1}function d(e){const t={length:e.length,item:n=>e[n]||null,forEach:n=>{e.forEach((o,i)=>n(o,i,t))},entries:()=>e.entries(),keys:()=>e.keys(),values:()=>e.values(),[Symbol.iterator]:()=>e[Symbol.iterator]()};return e.forEach((n,o)=>{t[o]=n}),t}Document.prototype.querySelectorAll=function(e){const t=ve.call(this,e);return d(p(t))},Document.prototype.querySelector=function(e){const t=Ae.call(this,e);return t&&S(t)?null:t},Document.prototype.getElementById=function(e){const t=Ce.call(this,e);return t&&S(t)?null:t},Element.prototype.querySelectorAll=function(e){const t=C.call(this,e);return d(p(t))},Element.prototype.querySelector=function(e){const t=Te.call(this,e);return t&&S(t)?null:t};const B=Object.getOwnPropertyDescriptor(Node.prototype,"childNodes")?.get,w=Object.getOwnPropertyDescriptor(Element.prototype,"children")?.get;B&&Object.defineProperty(Node.prototype,"childNodes",{get:function(){const e=B.call(this);return this===document.head||this===document.body||this===document.documentElement?d(p(e)):e},configurable:!0}),w&&Object.defineProperty(Element.prototype,"children",{get:function(){const e=w.call(this);return this===document.head||this===document.body||this===document.documentElement?d(p(e)):e},configurable:!0});const I=Object.getOwnPropertyDescriptor(Element.prototype,"innerHTML"),F=I?.get,H=I?.set;F&&H&&Object.defineProperty(Element.prototype,"innerHTML",{get:function(){const e=F.call(this);return c&&this===document.head?e.replace(/<style[^>]*id="grapes[^"]*"[^>]*>[\s\S]*?<\/style>/gi,""):e},set:function(e){H.call(this,e)},configurable:!0,enumerable:!0});const q=Object.getOwnPropertyDescriptor(Element.prototype,"outerHTML"),k=q?.get;k&&Object.defineProperty(Element.prototype,"outerHTML",{get:function(){if(!c)return k.call(this);if(l(this))return"";if(this===document.head||this===document.body||this===document.documentElement){const e=this.cloneNode(!0);return C.call(e,'[id^="grapes"], [data-grapes-injected]').forEach(o=>o.remove()),C.call(e,"*").forEach(o=>{l(o)&&o.remove()}),k.call(e)}return k.call(this)},set:q?.set,configurable:!0,enumerable:!0}),Document.prototype.getElementsByTagName=function(e){const t=Ne.call(this,e);return d(p(t))},Element.prototype.getElementsByTagName=function(e){const t=Le.call(this,e);return d(p(t))},Document.prototype.getElementsByClassName=function(e){const t=Se.call(this,e);return d(p(t))},Element.prototype.getElementsByClassName=function(e){const t=De.call(this,e);return d(p(t))};const U=Document.prototype.createTreeWalker;Document.prototype.createTreeWalker=function(e,t,n){if(!c)return U.call(this,e,t,n);const o={acceptNode:i=>{if(l(i))return NodeFilter.FILTER_REJECT;if(n){if(typeof n=="function")return n(i);if(n.acceptNode)return n.acceptNode(i)}return NodeFilter.FILTER_ACCEPT}};return U.call(this,e,t,o)};const W=Document.prototype.createNodeIterator;Document.prototype.createNodeIterator=function(e,t,n){if(!c)return W.call(this,e,t,n);const o={acceptNode:i=>{if(l(i))return NodeFilter.FILTER_REJECT;if(n){if(typeof n=="function")return n(i);if(n.acceptNode)return n.acceptNode(i)}return NodeFilter.FILTER_ACCEPT}};return W.call(this,e,t,o)};const Pe=Node.prototype.cloneNode;Node.prototype.cloneNode=function(e){const t=Pe.call(this,e);if(!c)return t;if(e&&t.nodeType===Node.ELEMENT_NODE){const n=t;if(n.querySelectorAll('[id*="grapes"], [data-grapes-injected]').forEach(i=>i.remove()),l(n))return document.createDocumentFragment()}return t};const Re=Element.prototype.matches;Element.prototype.matches=function(e){return c&&l(this)&&(e.includes("grapes")||e.includes("[data-grapes"))?!1:Re.call(this,e)};const _e=Element.prototype.closest;Element.prototype.closest=function(e){const t=_e.call(this,e);return c&&t&&l(t)?null:t};const Me=window.getComputedStyle;window.getComputedStyle=function(e,t){return Me.call(window,e,t)};const K=Object.getOwnPropertyDescriptor(Document.prototype,"all")?.get;K&&Object.defineProperty(Document.prototype,"all",{get:function(){const e=K.call(this);if(!c)return e;const t=Array.from(e).filter(n=>!l(n));return d(t)},configurable:!0});const V=Object.getOwnPropertyDescriptor(Node.prototype,"firstChild")?.get,z=Object.getOwnPropertyDescriptor(Node.prototype,"lastChild")?.get,Ge=Object.getOwnPropertyDescriptor(Node.prototype,"nextSibling")?.get,je=Object.getOwnPropertyDescriptor(Node.prototype,"previousSibling")?.get;V&&Object.defineProperty(Node.prototype,"firstChild",{get:function(){let e=V.call(this);if(c&&(this===document.head||this===document.body))for(;e&&l(e);)e=Ge?.call(e);return e},configurable:!0}),z&&Object.defineProperty(Node.prototype,"lastChild",{get:function(){let e=z.call(this);if(c&&(this===document.head||this===document.body))for(;e&&l(e);)e=je?.call(e);return e},configurable:!0});const J=Object.getOwnPropertyDescriptor(Element.prototype,"firstElementChild")?.get,X=Object.getOwnPropertyDescriptor(Element.prototype,"lastElementChild")?.get,Q=Object.getOwnPropertyDescriptor(Element.prototype,"nextElementSibling")?.get,$=Object.getOwnPropertyDescriptor(Element.prototype,"previousElementSibling")?.get;J&&Q&&Object.defineProperty(Element.prototype,"firstElementChild",{get:function(){let e=J.call(this);if(c&&(this===document.head||this===document.body||this===document.documentElement))for(;e&&l(e);)e=Q.call(e);return e},configurable:!0}),X&&$&&Object.defineProperty(Element.prototype,"lastElementChild",{get:function(){let e=X.call(this);if(c&&(this===document.head||this===document.body||this===document.documentElement))for(;e&&l(e);)e=$.call(e);return e},configurable:!0});const Y=Object.getOwnPropertyDescriptor(Element.prototype,"childElementCount")?.get;Y&&w&&Object.defineProperty(Element.prototype,"childElementCount",{get:function(){if(c&&(this===document.head||this===document.body||this===document.documentElement)){const e=w.call(this);return Array.from(e).filter(t=>!l(t)).length}return Y.call(this)},configurable:!0});let Z=!1;const ee=new Set;function g(e){ee.add(e),Z||(Z=!0,setTimeout(()=>{window.dispatchEvent(new CustomEvent("grapes-fingerprinting-detected",{detail:JSON.stringify({types:Array.from(ee),url:window.location.hostname})}))},100))}function N(e){const t=Math.floor(Math.random()*10);for(let n=0;n<Math.min(e.length,20);n+=4)e[n]=(e[n]+t)%256}const T=Math.random()*1e3,xe=HTMLCanvasElement.prototype.toDataURL;HTMLCanvasElement.prototype.toDataURL=function(e,t){const n=this.width,o=this.height;if(n<=300&&o<=150||n===220&&o===30||n===16&&o===16){g("canvas");const r=this.getContext("2d");if(r){const s=r.getImageData(0,0,n,o);N(s.data),r.putImageData(s,0,0)}}return xe.call(this,e,t)};const Be=HTMLCanvasElement.prototype.toBlob;HTMLCanvasElement.prototype.toBlob=function(e,t,n){const o=this.width,i=this.height;if(o<=300&&i<=150){g("canvas");const s=this.getContext("2d");if(s){const u=s.getImageData(0,0,o,i);N(u.data),s.putImageData(u,0,0)}}return Be.call(this,e,t,n)};const Ie=CanvasRenderingContext2D.prototype.getImageData;CanvasRenderingContext2D.prototype.getImageData=function(e,t,n,o,i){const r=Ie.call(this,e,t,n,o,i);return n<=300&&o<=150&&(g("canvas"),N(r.data)),r};const Fe=["webgl","webgl2","experimental-webgl"],He=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(e,t){const n=He.call(this,e,t);if(n&&Fe.includes(e)){const o=n,i=o.getParameter.bind(o);o.getParameter=function(s){return s===37445||s===37446?(g("webgl"),s===37445?"Generic Vendor":"Generic Renderer"):i(s)};const r=o.getShaderPrecisionFormat?.bind(o);r&&(o.getShaderPrecisionFormat=function(s,u){const a=r(s,u);return a&&g("webgl"),a})}return n};const O=window.AudioContext||window.webkitAudioContext,v=window.OfflineAudioContext||window.webkitOfflineAudioContext;if(O){const e=1e-4*T;window.AudioContext=function(t){const n=new O(t),o=n.createAnalyser.bind(n);n.createAnalyser=function(){const r=o(),s=r.getFloatFrequencyData.bind(r);r.getFloatFrequencyData=function(a){s(a),g("audio");for(let f=0;f<a.length;f++)a[f]+=e*(Math.random()-.5)};const u=r.getByteFrequencyData.bind(r);return r.getByteFrequencyData=function(a){u(a),g("audio");for(let f=0;f<Math.min(a.length,10);f++)a[f]=Math.max(0,Math.min(255,a[f]+Math.floor(Math.random()*2)))},r};const i=n.createOscillator.bind(n);return n.createOscillator=function(){const r=i();return g("audio"),r},n},Object.setPrototypeOf(window.AudioContext,O),window.AudioContext.prototype=O.prototype}v&&(window.OfflineAudioContext=function(e,t,n){g("audio");const o=new v(e,t,n),i=o.startRendering.bind(o);return o.startRendering=function(){return i().then(r=>{for(let s=0;s<r.numberOfChannels;s++){const u=r.getChannelData(s);for(let a=0;a<Math.min(u.length,100);a++)u[a]+=1e-4*T*(Math.random()-.5)}return r})},o},Object.setPrototypeOf(window.OfflineAudioContext,v),window.OfflineAudioContext.prototype=v.prototype);const qe=Element.prototype.getBoundingClientRect;Element.prototype.getBoundingClientRect=function(){const e=qe.call(this);this.tagName?.toLowerCase();const t=!this.textContent?.trim(),n=e.width<50&&e.height<50,o=this.style?.visibility==="hidden"||this.style?.opacity==="0";if(t&&n||o){const i=T*1e-5;return new DOMRect(e.x+i,e.y+i,e.width+i,e.height+i)}return e};let te=!1;function b(){te||(te=!0,window.dispatchEvent(new CustomEvent("grapes-visibility-tracking-detected",{detail:JSON.stringify({url:window.location.hostname})})))}const ne=Object.getOwnPropertyDescriptor(Document.prototype,"visibilityState");ne?.get&&Object.defineProperty(Document.prototype,"visibilityState",{get:function(){return ne.get.call(this)==="hidden"&&b(),"visible"},configurable:!0,enumerable:!0});const oe=Object.getOwnPropertyDescriptor(Document.prototype,"hidden");oe?.get&&Object.defineProperty(Document.prototype,"hidden",{get:function(){return oe.get.call(this)&&b(),!1},configurable:!0,enumerable:!0});const re=EventTarget.prototype.addEventListener,ie=EventTarget.prototype.removeEventListener,D=new WeakMap;EventTarget.prototype.addEventListener=function(e,t,n){if(e==="visibilitychange"&&t){b();const o=function(i){typeof t=="function"?t.call(this,i):t&&typeof t.handleEvent=="function"&&t.handleEvent(i)};return D.set(t,o),re.call(this,e,o,n)}return re.call(this,e,t,n)},EventTarget.prototype.removeEventListener=function(e,t,n){if(e==="visibilitychange"&&t){const o=D.get(t);if(o)return D.delete(t),ie.call(this,e,o,n)}return ie.call(this,e,t,n)};const L=Object.getOwnPropertyDescriptor(Document.prototype,"onvisibilitychange");if(L){let e=null;Object.defineProperty(Document.prototype,"onvisibilitychange",{get:function(){return e},set:function(t){t&&b(),e=t,L.set&&L.set.call(this,t)},configurable:!0,enumerable:!0})}let ce=!1;const Ue=3;let se=0;window.addEventListener.bind(window);const We=e=>{(e==="focus"||e==="blur")&&(se++,se>=Ue&&!ce&&(ce=!0,b()))},Ke=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(e,t,n){return We(e),Ke.call(this,e,t,n)};let le=!1;const ae=new Set;let ue=0;const Ve=["google-analytics.com","googletagmanager.com","doubleclick.net","googlesyndication.com","googleadservices.com","facebook.com/tr","facebook.net","fbcdn.net","analytics.twitter.com","t.co","platform.twitter.com","bat.bing.com","clarity.ms","browser.events.data.microsoft.com","pixel.quantserve.com","quantcast.com","amazon-adsystem.com","assoc-amazon.com","criteo.com","criteo.net","outbrain.com","taboola.com","linkedin.com/px","snap.licdn.com","tiktok.com/i18n/pixel","analytics.tiktok.com","pinterest.com/ct","ct.pinterest.com","segment.io","segment.com","mixpanel.com","mxpnl.com","amplitude.com","hubspot.com","hs-analytics.net","hsforms.net","intercom.io","zendesk.com","optimizely.com","chartbeat.com","scorecardresearch.com","newrelic.com","nr-data.net","sentry.io","bugsnag.com","rollbar.com","loggly.com","sumologic.com"],ze=[/\/pixel\??/i,/\/beacon\??/i,/\/track(ing)?\??/i,/\/collect\??/i,/\/event\??/i,/\/analytics/i,/\/t\.gif/i,/\/p\.gif/i,/\/1x1\./i,/\/transparent\./i,/\/blank\.(gif|png)/i,/\/spacer\.(gif|png)/i];function m(e){try{const t=new URL(e,window.location.href);for(const n of Ve)if(t.hostname.includes(n)||t.href.includes(n))return{isTracking:!0,type:"analytics"};for(const n of ze)if(n.test(t.pathname))return{isTracking:!0,type:"pixel"};return{isTracking:!1,type:""}}catch{return{isTracking:!1,type:""}}}function h(e){ue++,ae.add(e),le||(le=!0,setTimeout(()=>{window.dispatchEvent(new CustomEvent("grapes-tracking-pixel-detected",{detail:JSON.stringify({count:ue,types:Array.from(ae),url:window.location.hostname})}))},500))}const de=navigator.sendBeacon?.bind(navigator);de&&(navigator.sendBeacon=function(e,t){return m(e).isTracking?(h("beacon"),console.log("[GRAPES] Blocked sendBeacon to:",e),!0):de(e,t)});const Je=window.fetch;window.fetch=function(e,t){const n=typeof e=="string"?e:e instanceof URL?e.href:e.url;return m(n).isTracking?(h("fetch"),console.log("[GRAPES] Blocked fetch to:",n),Promise.resolve(new Response("",{status:200,statusText:"OK"}))):Je.call(window,e,t)};const Xe=XMLHttpRequest.prototype.open,Qe=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(e,t,n=!0,o,i){const r=typeof t=="string"?t:t.href;return this.__grapesUrl=r,this.__grapesIsTracking=m(r),Xe.call(this,e,t,n,o,i)},XMLHttpRequest.prototype.send=function(e){if(this.__grapesIsTracking?.isTracking){h("xhr"),console.log("[GRAPES] Blocked XHR to:",this.__grapesUrl),Object.defineProperty(this,"status",{value:200,writable:!1}),Object.defineProperty(this,"statusText",{value:"OK",writable:!1}),Object.defineProperty(this,"responseText",{value:"",writable:!1}),Object.defineProperty(this,"readyState",{value:4,writable:!1}),setTimeout(()=>{this.dispatchEvent(new Event("load")),this.dispatchEvent(new Event("loadend"))},0);return}return Qe.call(this,e)};const ge=window.Image;window.Image=function(e,t){const n=new ge(e,t),o=Object.getOwnPropertyDescriptor(HTMLImageElement.prototype,"src");return(e===1&&t===1||e!==void 0&&e<=3&&t!==void 0&&t<=3)&&Object.defineProperty(n,"src",{get:function(){return o?.get?.call(this)??""},set:function(r){if(m(r).isTracking){h("pixel"),console.log("[GRAPES] Blocked tracking pixel:",r),setTimeout(()=>{this.dispatchEvent(new Event("load"))},0);return}o?.set?.call(this,r)},configurable:!0,enumerable:!0}),n},window.Image.prototype=ge.prototype;const $e=new y(e=>{e.forEach(t=>{t.addedNodes.forEach(n=>{if(n.nodeType===Node.ELEMENT_NODE){const o=n;if(o.tagName==="IMG"&&P(o),o.querySelectorAll?.("img")?.forEach(r=>P(r)),o.tagName==="IFRAME"){const r=o,s=r.src||"",u=m(s),a=(r.width==="0"||r.width==="1")&&(r.height==="0"||r.height==="1");(u.isTracking||a)&&(h("iframe"),console.log("[GRAPES] Blocked tracking iframe:",s),r.src="about:blank",r.remove())}}})})});function P(e){const t=e.src||e.getAttribute("src")||"",n=e.width||parseInt(e.getAttribute("width")||"0",10),o=e.height||parseInt(e.getAttribute("height")||"0",10),i=n<=3&&o<=3||n===0&&o===0,r=e.style,s=r.display==="none"||r.visibility==="hidden"||r.opacity==="0"||parseInt(r.width||"999",10)<=1&&parseInt(r.height||"999",10)<=1,u=m(t);(i||s)&&(u.isTracking||t)&&u.isTracking&&(h("pixel"),console.log("[GRAPES] Blocked tracking pixel image:",t),e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e.removeAttribute("src"))}const pe=()=>{$e.observe(document.body||document.documentElement,{childList:!0,subtree:!0}),document.querySelectorAll("img").forEach(e=>{P(e)})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",pe):pe(),console.log("[GRAPES] Stealth mode activated - MutationObserver intercepted"),console.log("[GRAPES] Session replay protection enabled"),console.log("[GRAPES] Fingerprinting protection enabled"),console.log("[GRAPES] Visibility tracking protection enabled"),console.log("[GRAPES] Tracking pixel protection enabled")}};function Ze(){}function E(c,...A){}const me={debug:(...c)=>E(console.debug,...c),log:(...c)=>E(console.log,...c),warn:(...c)=>E(console.warn,...c),error:(...c)=>E(console.error,...c)};return(async()=>{try{return await fe.main()}catch(c){throw me.error('The content script "stealth" crashed on startup!',c),c}})()})();
stealth;